<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:shared="clr-namespace:FlickrApp.Views.Shared"
             xmlns:entities="clr-namespace:FlickrApp.Entities"
             x:Class="FlickrApp.Views.Shared.PhotoListView">

    <ContentView.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </ContentView.Resources>

    <CollectionView
        ItemsSource="{Binding
            Source={RelativeSource AncestorType={x:Type shared:PhotoListView}},
            Path=ItemsSource}"
        RemainingItemsThreshold="3"
        RemainingItemsThresholdReachedCommand="{Binding
            Source={RelativeSource AncestorType={x:Type shared:PhotoListView}},
            Path=LoadMoreItemsCommand}">
        <CollectionView.ItemsLayout>
            <LinearItemsLayout
                Orientation="Vertical"
                ItemSpacing="10" />
        </CollectionView.ItemsLayout>
        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="entities:PhotoEntity">
                <Border
                    StrokeShape="RoundRectangle 25,25,25,25"
                    StrokeThickness="0" HeightRequest="220"
                    WidthRequest="363"
                    Padding="0,10">
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Offset="5,10" Radius="10" Opacity="0.6" />
                    </Border.Shadow>
                    <ImageButton
                        Source="{Binding DisplayMediumSource}"
                        Aspect="AspectFill"
                        Command="{Binding
                            Source={RelativeSource AncestorType={x:Type shared:PhotoListView}},
                            Path=ItemTappedCommand}"
                        CommandParameter="{Binding .}"
                        CornerRadius="25" />
                </Border>
            </DataTemplate>
        </CollectionView.ItemTemplate>
        <CollectionView.EmptyView>
            <Border
                StrokeThickness="0"
                Padding="20">
                <Image
                    Source="photo_list_empty"
                    VerticalOptions="Center"
                    HorizontalOptions="Center"
                    Aspect="AspectFit" />
            </Border>
        </CollectionView.EmptyView>
    </CollectionView>

</ContentView>