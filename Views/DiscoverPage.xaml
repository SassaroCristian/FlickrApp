<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             
             xmlns:viewModels="clr-namespace:FlickrApp.ViewModels"
             xmlns:shared="clr-namespace:FlickrApp.Views.Shared"
             xmlns:converters="clr-namespace:FlickrApp.Converters"
             xmlns:locators="clr-namespace:FlickrApp.Locators"

             x:DataType="viewModels:DiscoverViewModel"
             BindingContext="{x:Static locators:ViewModelLocator.DiscoverViewModel}"

             x:Class="FlickrApp.Views.DiscoverPage"
             Title="Discover"
             BackgroundColor="{StaticResource PrimaryBackgroundColor}">

    <ContentPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                 <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
             </ResourceDictionary.MergedDictionaries>

            <converters:NullOrEmptyToNaConverter x:Key="naConverter" />
            <converters:TagListToStringConverter x:Key="tagListConverter" />

            <Style x:Key="TagButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="{StaticResource ButtonBackgroundColor}"/> <Setter Property="TextColor" Value="{StaticResource ButtonTextColor}"/> <Setter Property="CornerRadius" Value="8"/> <Setter Property="FontSize" Value="Small"/>
                <Setter Property="Padding" Value="10,5"/>
                <Setter Property="MinimumHeightRequest" Value="40"/>
                <Setter Property="MinimumWidthRequest" Value="70"/>
                <Setter Property="BorderColor" Value="{StaticResource PrimaryPlaceholderColor}"/> <Setter Property="BorderWidth" Value="1"/>
            </Style>
            <Style x:Key="HeaderLabelStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource PrimaryTextColor}"/> <Setter Property="FontSize" Value="Medium"/>
                <Setter Property="VerticalTextAlignment" Value="Center"/>
                <Setter Property="HorizontalTextAlignment" Value="Start"/>
                <Setter Property="Margin" Value="10,0,0,10"/>
                <Setter Property="FontAttributes" Value="Bold"/> </Style>
            </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, Auto, *, Auto" Margin="10"
          BackgroundColor="{StaticResource PrimaryBackgroundColor}">

        <ScrollView Orientation="Horizontal" Grid.Row="0" Padding="0,10,0,10">
            <HorizontalStackLayout Spacing="10">
                <Button Text="Popular" Command="{Binding FilterByTagCommand}" CommandParameter="{x:Null}" Style="{StaticResource TagButtonStyle}"/>
                <Button Text="Animals" Command="{Binding FilterByTagCommand}" CommandParameter="animals" Style="{StaticResource TagButtonStyle}"/>
                <Button Text="Nature" Command="{Binding FilterByTagCommand}" CommandParameter="nature" Style="{StaticResource TagButtonStyle}"/>
                <Button Text="Architecture" Command="{Binding FilterByTagCommand}" CommandParameter="architecture" Style="{StaticResource TagButtonStyle}"/>
                <Button Text="People" Command="{Binding FilterByTagCommand}" CommandParameter="people" Style="{StaticResource TagButtonStyle}"/>
                <Button Text="Travel" Command="{Binding FilterByTagCommand}" CommandParameter="travel" Style="{StaticResource TagButtonStyle}"/>
            </HorizontalStackLayout>
        </ScrollView>

        <Label Grid.Row="1"
               Text="{Binding FilterDisplayTitle}"
               Style="{StaticResource HeaderLabelStyle}"/> <shared:PhotoListView Grid.Row="2"
                                                                   
                              ItemsSource="{Binding Photos}"
                              LoadMoreItemsCommand="{Binding LoadMoreItemsCommand}"
                              ItemTappedCommand="{Binding GoToPhotoDetailsCommand}" />

        <ActivityIndicator Grid.Row="0" Grid.RowSpan="4" HorizontalOptions="Center" VerticalOptions="Center"
                           IsRunning="{Binding IsLoading}"
                           IsVisible="{Binding IsLoading}"
                           Color="{StaticResource SecondaryBackgroundColor}"/>

    </Grid>
</ContentPage>
